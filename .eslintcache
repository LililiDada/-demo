[{"D:\\dashanwai\\practise\\small-demo\\src\\index.js":"1","D:\\dashanwai\\practise\\small-demo\\src\\App.js":"2","D:\\dashanwai\\practise\\small-demo\\src\\views\\DragAndDropPage\\Index.jsx":"3","D:\\dashanwai\\practise\\small-demo\\src\\util.js":"4"},{"size":512,"mtime":1609209260022,"results":"5","hashOfConfig":"6"},{"size":286,"mtime":1609209362117,"results":"7","hashOfConfig":"6"},{"size":4017,"mtime":1609238737317,"results":"8","hashOfConfig":"6"},{"size":724,"mtime":1609209252928,"results":"9","hashOfConfig":"6"},{"filePath":"10","messages":"11","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"5wlz2w",{"filePath":"12","messages":"13","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"14","messages":"15","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"16"},{"filePath":"17","messages":"18","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"D:\\dashanwai\\practise\\small-demo\\src\\index.js",[],"D:\\dashanwai\\practise\\small-demo\\src\\App.js",[],"D:\\dashanwai\\practise\\small-demo\\src\\views\\DragAndDropPage\\Index.jsx",["19"],"import React, {useMemo , useState} from 'react';\r\nimport styles from './index.module.scss';\r\n//  每行多少列\r\nconst COLUMN = 4;\r\n//  每个元素宽度\r\nconst WIDTH = 120;\r\n//  每个元素高度\r\nconst HEIGHT = 80;\r\n// 图片左右 padding\r\nconst IMAGE_PADDING = 5;\r\n\r\nconst showList = [\r\n    {\r\n        id: 2,\r\n        name: 'osmo pocket',\r\n        image:\r\n            'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1605703865983&di=a35a43a3b9e866f1ee0048563bfd2577&imgtype=0&src=http%3A%2F%2Fpic.rmb.bdstatic.com%2F5d8f2523322e3f4de91021701e95182c.jpeg',\r\n    },\r\n    {\r\n        id: 4,\r\n        name: 'mavic pro',\r\n        image:\r\n            'https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=787082346,3090178555&fm=15&gp=0.jpg',\r\n    },\r\n    {\r\n        id: 1,\r\n        name: 'mavic mini2',\r\n        image:\r\n            'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1605703111703&di=59fa621eb1e7f8f4285b95df80e11fd0&imgtype=0&src=http%3A%2F%2Fp1.itc.cn%2Fimages01%2F20201105%2F600892c32d524b99a118ea56cdf3c211.png',\r\n    },\r\n    {\r\n        id: 3,\r\n        name: '机甲大师s1',\r\n        image:\r\n            'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1605703133913&di=a415583ce97dd0a34efe17cac24a97ab&imgtype=0&src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fimages%2F20200325%2F64ebb68f1125450f91e64bb34dc19d55.jpeg',\r\n    },\r\n    {\r\n        id: 0,\r\n        name: 'mavic 2',\r\n        image:\r\n            'https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=4132295553,3011440949&fm=26&gp=0.jpg',\r\n    },\r\n];\r\n\r\n// 将某元素插入到数组中的某位置\r\nexport function insertBefore(list,from,to){\r\n    const copy = [...list];\r\n    const fromIndex = copy.indexOf(from);\r\n    if(from===to){\r\n        return copy;\r\n    }\r\n    copy.splice(fromIndex,1);\r\n    const newToIndex = to ? copy.indexOf(to) : -1;\r\n    if(to && newToIndex >= 0){\r\n        copy.splice(newToIndex,0,from)\r\n    }else{\r\n        // 没有to,或者to不在序列里，将元素移动到末尾\r\n        copy.push(from)\r\n    }\r\n    return copy\r\n}\r\n\r\nconst DragAndDropPage = () => {\r\n    const [list,setList] = useState(showList);\r\n\r\n    // IMPORTANT:动画需要，保持一定的渲染顺序\r\n    const sortedList = useMemo(() => {\r\n        return list.slice().sort((a,b) => {\r\n            return a.id - b.id;\r\n        });\r\n    },[list])\r\n\r\n    const listHeight = useMemo(() => {\r\n        const size = list.length;\r\n        return Math.ceil(size / COLUMN) * HEIGHT\r\n    },[list])\r\n\r\n    console.log(sortedList)\r\n    return(\r\n        <div\r\n            className={styles.wrapper}\r\n            style={{width:COLUMN * (WIDTH + IMAGE_PADDING) + IMAGE_PADDING}}\r\n        >\r\n            <ul\r\n                className={styles.list}\r\n                style={{height:listHeight}}\r\n            >\r\n                {\r\n                    sortedList.map((item) => {\r\n                        const index = list.findIndex((i) => i===item);\r\n                        const row = Math.floor(index / COLUMN);\r\n                        const col = index % COLUMN;\r\n                        return(\r\n                            <li\r\n                                draggable\r\n                                key={item.id}\r\n                                className={styles.item}\r\n                                style={{\r\n                                    height:HEIGHT,\r\n                                    left: col * (WIDTH + IMAGE_PADDING),\r\n                                    top: row * HEIGHT,\r\n                                    padding: `0${IMAGE_PADDING}px`\r\n                                }}\r\n                                data-id = {item.id}\r\n                            >\r\n                                <img src={item.image} alt={item.name} width={WIDTH} />\r\n                            </li>\r\n                        )\r\n                    })\r\n                }\r\n            </ul>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default React.memo(DragAndDropPage);","D:\\dashanwai\\practise\\small-demo\\src\\util.js",[],{"ruleId":"20","severity":1,"message":"21","line":64,"column":17,"nodeType":"22","messageId":"23","endLine":64,"endColumn":24},"no-unused-vars","'setList' is assigned a value but never used.","Identifier","unusedVar"]